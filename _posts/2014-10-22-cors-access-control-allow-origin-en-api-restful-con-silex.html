---
layout: post
status: publish
published: true
title: CORS (Access-Control-Allow-Origin) en API RESTful con Silex
author:
  display_name: Ariel Orozco
  login: ariel
  email: bassplayer85@gmail.com
  url: ''
author_login: ariel
author_email: bassplayer85@gmail.com
wordpress_id: 180
wordpress_url: http://arielorozco.com/?p=180
date: '2014-10-22 12:55:49 -0600'
date_gmt: '2014-10-22 18:55:49 -0600'
categories:
- tutoriales
- php
- silex
tags:
- PHP
- silex
comments: []
---
<p>Es muy com&uacute;n cuando desarrollas&nbsp;un API <a href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Representational_state_transfer">Restful<&#47;a> que te topes con el t&iacute;pico <em>"No 'Access-Control-Allow-Origin' header is present on the requested resource."<&#47;em>&nbsp;. Esto sucede porque est&aacute;s haciendo un <a href="https:&#47;&#47;developer.mozilla.org&#47;en-US&#47;docs&#47;Web&#47;API&#47;XMLHttpRequest">XMLHttpRequest<&#47;a> a un dominio distinto del de la aplicaci&oacute;n, el navegador bloquea estas peticiones por motivos de seguridad. Una soluci&oacute;n de esto es usar <a href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Cross-origin_resource_sharing">CORS<&#47;a>, y para nuestra facilidad esto es muy sencillo si desarrollas tu API con <a href="http:&#47;&#47;silex.sensiolabs.org&#47;">Silex<&#47;a>.</p>
<p>En el archivo donde inicias&nbsp;tu aplicaci&oacute;n (generalmente app.php)&nbsp;debes colocar esto al inicio del script:</p>
<p>[php]use Symfony\Component\HttpFoundation\Request;<br />
use Symfony\Component\HttpFoundation\Response;[&#47;php]</p>
<p>Y despu&eacute;s incluyes esto:</p>
<p>[php]$app->after(function (Request $request, Response $response) {<br />
$response->headers->set('Access-Control-Allow-Origin', '*');<br />
});[&#47;php]</p>
<p>En una aplicaci&oacute;n sencilla te quedar&iacute;a algo as&iacute;:</p>
<p>[php]use Silex\Application;<br />
use Symfony\Component\HttpFoundation\Request;<br />
use Symfony\Component\HttpFoundation\Response;</p>
<p>$app = new Application();</p>
<p>$app['debug'] = false;</p>
<p>$app->after(function (Request $request, Response $response) {<br />
$response->headers->set('Access-Control-Allow-Origin', '*');<br />
});</p>
<p>return $app;[&#47;php]</p>
<p>Con eso ya tienes solucionado tu problema!</p>
<p>Si necesitas un esqueleto de una aplicaci&oacute;n Silex puedes&nbsp;usar <a href="https:&#47;&#47;github.com&#47;arielcr&#47;77-silex-starter">mi template de silex<&#47;a>&nbsp;que esta basado en el de <a href="https:&#47;&#47;github.com&#47;silexphp&#47;Silex-Skeleton">Fabien Potencier<&#47;a>&nbsp;(creador de Silex), solo que con algunas librer&iacute;as &uacute;tiles &nbsp;de m&aacute;s.</p>
